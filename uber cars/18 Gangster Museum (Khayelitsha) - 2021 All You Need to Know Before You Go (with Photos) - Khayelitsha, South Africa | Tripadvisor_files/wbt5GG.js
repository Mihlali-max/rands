(this.$WP=this.$WP||[]).push(["wbt5GG",(t,e)=>{"use strict";var a,i,s,n,r,o,c,h,l,p,m,L,d={icon:"/img2/maps/icons/my_location_dot.png",width:30,height:30,anchor:{x:15,y:15}},u=({variant:t="Square"})=>{var e=h(),{map:i}=a.useContext(l),{localize:s}=c();return i&&a.createElement(L,{map:i,tracker:e,deniedText:s.string("mw_js_positionPermissionDenied"),variant:t,ariaLabel:s.string("phoenix_maps_accessibility_locate_me")})};return[()=>{L=class extends a.Component{constructor(...t){super(...t),this.state={trackingLocation:!1,active:!1},this.setInactive=()=>{this.setState({active:!1})},this.setMapInteractionListeners=()=>{var{map:t}=this.props;t&&t.once("panStart",this.setInactive)},this.clearMapInteractionListeners=()=>{var{map:t}=this.props;t&&t.off("panStart",this.setInactive)},this.moveMapToNewLocation=t=>{var{map:e}=this.props;e&&e.setCenter(t,16,!0)},this.isLatLngValid=t=>0!==t.lat||0!==t.lng,this.trackClick=()=>{this.props.tracker({module:"find_me",action:"find_me_click"})},this.askForLocation=()=>{if(this.trackClick(),this.setState({active:!0}),this.state.trackingHandler)this.state.userLocation&&(this.moveMapToNewLocation(this.state.userLocation),this.setMapInteractionListeners());else{var t=s((t,e)=>{var a=new p(t,e);this.isLatLngValid(a)&&(this.state.trackingLocation||(this.moveMapToNewLocation(a),this.setMapInteractionListeners()),this.setState({userLocation:a,trackingLocation:!0}))},()=>{window.alert(this.props.deniedText),this.setState({active:!1,trackingHandler:null})});this.setState({trackingHandler:t})}}}componentWillUnmount(){this.state.trackingHandler&&(n(this.state.trackingHandler),this.clearMapInteractionListeners())}render(){var t=this.state.userLocation?a.createElement(m,{position:this.state.userLocation,width:d.width,height:d.height,src:d.icon,anchor:d.anchor}):null;return"Circle"===this.props.variant?a.createElement("div",null,a.createElement(o,{icon:this.state.active?"nearby-fill":"nearby",ariaLabel:this.props.ariaLabel,onClick:this.askForLocation,onKeyDown:this.askForLocation}),t):a.createElement("div",null,a.createElement("div",{className:"_2XMGxXHz",onClick:this.askForLocation},a.createElement("span",{className:i("ocTOXHET",this.state.active?"_3pZryCkw":"")},a.createElement(r,{name:"nearby"}))),t)}},t("default",u)},[t=>a=t,t=>i=t.default,t=>(s=t.watchLocation,n=t.clearWatch),t=>r=t.default,t=>o=t.CircularFloatingActionButton,t=>c=t.useLocalize,t=>h=t.useGARecorder,t=>(l=t.MapContext,p=t.LatLng,m=t.IconMarker)]]},["cDcdfi","jSLlaY","fiorRT","pyY-iJ","yIC5Nu","0DsHEV","fsml46","VwUieX"]]);
