(this.$WP=this.$WP||[]).push(["CTabsQ",(e,t)=>{"use strict";var n,r,a,l,u,s,o,i,c,f,d,m,g,v,h,D,p,k,y,E,P,A,O,B,S,b,C,x,I,R,w;function M({picker:e,inputField:t,onClose:n,inline:a,alignEdge:l,onReset:u}){var{viewportCategory:s}=i(A),o=null==e?void 0:e.renderPicker({setValue:e.setValue,onApply:e.onApply,value:e.value}),d=r.createElement(c,{size:"small",onClick:null==e?void 0:e.onApply},r.createElement(S,{id:"phoenix_picker_apply"})," "),m=u?r.createElement(f,{onClick:u,variant:"accent"},r.createElement(S,{id:"sng_fusion_list_filters_modal_reset"})):null;return"MOBILE"===s?e?r.createElement(D,{header:t,stickyHeader:!0,primaryButton:d,secondaryButton:m,slideFrom:a?"right":"bottom",onClose:n,heightOption:"full",closeButtonPosition:a?"left":void 0,closeButtonIcon:a?"single-chevron-left":void 0},r.createElement("div",{className:"_2tkHAKDl"},o||"")):null:r.createElement(r.Fragment,null,a&&e&&r.createElement("div",{className:"SbEP4uFH"},o),!a&&(null==e?void 0:e.ref.current)&&r.createElement(r.Fragment,null,r.createElement(B,{animated:!0,unstyled:!0,position:"below",shiftY:12,arrowType:"none",alignEdge:l,target:e.ref.current,autoFocus:!0,shouldRestoreFocus:!0},r.createElement("div",{className:"_2_4wMH69"},o,e.showApplyButton&&r.createElement("div",{className:"_2YJ1IMhe"},d))),r.createElement(k,{event:"click",callback:n})))}function _({pickers:e,autoAdvance:t=!0,onBeforeAdvance:n=(()=>!0),onOpen:i,onComplete:c=(()=>{}),autoOpen:f=!1,autoOpenDelay:g=2e3,inputFieldVariant:v="ENTRY",inline:h=!1,children:D,onReset:k,alignEdge:E="left"}){var P=l(null),A=l(null),O=l(null),{trackClick:B}=y(),S=C(),b=u(()=>{S&&null!=A.current&&A.current.ref.current.focus()},[S]),I=u(e=>{e&&O.current?O.current(e):t&&P.current&&A.current&&n(A.current)&&null==P.current()&&(b(),c())},[t,n,c,b]),R=s(()=>Array.from({length:e.length},()=>r.createRef()),[e.length]),w=s(()=>e.map((e,t)=>Object.assign({},e,{setValue:t=>{var n=e.setValue?e.setValue(t):null;I(n)},onApply:()=>{var t=e.onApply?e.onApply():null;I(t)},ref:R[t]})),[I,e,R]),_=f&&0===g,{openPicker:T,nextPicker:H,closePicker:V,currentPicker:F,getPickerValues:N,isOpen:j}=function(e,t=!1){var n,[r,s]=a(t?null==(n=e[0])?void 0:n.name:null),o=l(null);o.current=e.find(e=>e.name===r);var i=u(()=>{var t;if(!r)return null;var n=e.findIndex(e=>e===o.current),a=null==(t=e[n+1])?void 0:t.name;return s(a),a},[r,e]),c=u(()=>{s(null)},[s]),f=u(t=>{var n=t||e[0].name;s(n)},[e]),{trackClick:d}=y();return x("Escape",c),{isOpen:!!r,nextPicker:i,closePicker:c,openPicker:f,getPickerValues:e=>{var t=o.current;return{isOpen:e.name===(null==t?void 0:t.name),isDimmed:null==t||e!==t,onClick:()=>{d({clientContext:`click${e.name[0].toUpperCase()}${e.name.substring(1)}PickerButton`}),s(e.name)}}},currentPicker:o.current}}(w,_);P.current=H,A.current=F,O.current=T,o(()=>{var e=f&&!_&&O.current?setTimeout(O.current,g):null;return()=>clearTimeout(e)},[f,g,_]),o(()=>{F&&(B({clientContext:"pickerOpened",clientParameter:F.name}),null==i||i(F))},[F,B,i]);var W=()=>{b(),V()},z=(e=!1)=>r.createElement("div",null,r.createElement(m,{variant:v},w.map(e=>e.renderButton(null==F?void 0:F.name,function(e,t,n){return{selected:!n.isDimmed,onClick:n.onClick,key:e.name,ref:e.ref}}(e,0,N(e))))),e&&r.createElement("div",{className:"_2Ib2Ahii"},r.createElement(d,{marginY:"spacing-05"}))),L=()=>r.createElement(p,{events:["onClick","onTouchStart"]},z(),r.createElement(M,{picker:F,inputField:z(!0),onClose:W,inline:h,alignEdge:E,onReset:k}));return x("Escape",W),D?D({renderPickerFlow:L,currentPicker:F,closePicker:V}):L()}var T=({fromMonth:e,monthRange:t,maxRangeDays:r,startDate:a,endDate:l,onDateSelect:u,onDateReset:s,onDateRangeSelect:o,numberOfMonths:i,layoutStyle:c,fullHeight:f,fullWidth:d,isEndDate:m=!1,disableBefore:g=new Date})=>{var[v,h]=n.useState(m?a:null);n.useEffect(()=>{h(m?a:null)},[a,m]);var D=n.useCallback((e,t)=>{t||(!v||!m&&v>=e?(h(e),u&&u(e,!1)):e>v?(u&&u(e,!0),o&&o(v,e),h(null)):e<v&&(u&&u(e,!1),h(e)))},[v,m,o,u]);return n.createElement(I,{onDateReset:s,month:v||a,fromMonth:e,monthRange:t,numberOfMonths:i,layoutStyle:c,startDate:v||a,endDate:v?null:l,onDateSelect:D,fullWidth:d,fullHeight:f,maxRangeDays:v||m?r:null,disableBefore:g})};function H(e,t,n,a,l,u,s){var o=!!n;return l?o&&s.selected||u&&"toDate"!==n?r.createElement(g,Object.assign({from:a?null:e,to:a?null:t},s)):null:o?r.createElement(v,Object.assign({date:u?e:t},s)):u?r.createElement(g,Object.assign({from:a?null:e,to:a?null:t},s)):null}function V({startDate:e,endDate:t,isDefaultDates:n,setDates:a,resetDates:l,maxRangeDays:u,disableBefore:o,fromMonth:c}){var{viewportCategory:f}=i(A),d="MOBILE"===f,m="DESKTOP"===f;return s(()=>{var s=a=>({setValue:s})=>r.createElement(T,{fromMonth:c||new Date,monthRange:d?13:12,numberOfMonths:m?2:1,maxRangeDays:null==u?30:u,onDateReset:n?void 0:l,startDate:e,endDate:t,layoutStyle:d?"infiniteVerticalScroll":"paginated",onDateSelect:s,isEndDate:a,disableBefore:o||new Date,fullWidth:!0});return[{name:"startDate",value:e,setValue:e=>{a(e,!0)},renderButton:(r,a)=>H(e,t,r,n,d,!0,a),renderPicker:s()},{name:"endDate",value:t,setValue:t=>t<e?(a(t,!0),"endDate"):(a(t,!1),null),renderButton:(r,a)=>H(e,t,r,n,d,!1,a),renderPicker:s(!0)}]},[t,n,m,d,l,a,e,u,o,c])}var F=({fromMonth:e,monthRange:t,selectedDate:r,onDateSelect:a,numberOfMonths:l,layoutStyle:u,fullWidth:s,fullHeight:o,disabledDates:i})=>{var c=n.useCallback((e,t)=>{t||a&&a(e)},[a]);return n.createElement(I,{month:r,fromMonth:e,monthRange:t,numberOfMonths:l,layoutStyle:u,startDate:r,onDateSelect:c,fullHeight:o,fullWidth:s,disabledDates:i})};function N({date:e,setDate:t,availableDates:n}){var{viewportCategory:a}=i(A),l="MOBILE"===a,c="DESKTOP"===a,f=u(e=>!!n&&!n.has(e.toISOString().split("T")[0]),[n]),d=f(e)&&n?(e=>{var t=null==e?void 0:e.values().next().value;if(null!=t){var[n,r,a]=t.split("-").map(e=>parseInt(e,10));return new Date(n,r-1,a)}return null})(n):e;return o(()=>{d&&d.getTime()!==e.getTime()&&t(d)},[e,d,t]),s(()=>({name:"date",value:d,setValue:e=>{t(e)},renderButton:function(e,t){return r.createElement(v,Object.assign({date:d},t))},renderPicker:function({setValue:e}){return r.createElement(F,{fromMonth:new Date,monthRange:24,numberOfMonths:c?2:1,selectedDate:d,layoutStyle:l?"infiniteVerticalScroll":"paginated",onDateSelect:e,fullWidth:!0,disabledDates:f})}}),[c,l,t,f,d])}var j=/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/,W=e=>{if(null!=e&&j.test(e)){var t=new Date(e+"T00:00");if(!isNaN(t.getTime()))return t}return null},z=(e,t)=>{var n=W(e);if(null!==n)return n;var r=new Date;return new Date(r.getFullYear(),r.getMonth(),r.getDate()+t)};function L(e){var{state:{commerce:t},dispatch:n}=E(),{update:{attractions:{setDates:r}}}=i(O),{trackClick:a}=y(),{startDate:l,endDate:s}=(null==t?void 0:t.attractionCommerce)||{},o=W(l),c=W(s),f=u((e,t)=>{a({clientContext:"setAttractionsDates",clientParameter:JSON.stringify({startDate:P(e),endDate:P(t)})}),r(e,t),n({type:"setAttractionsDates",startDate:e,endDate:t,setByUser:!0})},[n,r,a]),d=u(e=>{var t=new Date(e.getTime()+864e5);f(e,t)},[f]),m=u(()=>{r(null,null),a({clientContext:"resetAttractionsDates"}),n&&n({type:"resetAttractionsDates"})},[n,r,a]),g=z(null==e?void 0:e.startDate,0),v=z(null==e?void 0:e.endDate,1);return{singleDate:o||g,startDate:o||g,endDate:c||v,isDefaultDates:!(o&&c||(null==e?void 0:e.setByUser)),setDateRange:f,setSingleDate:d,resetDates:m}}function G(){var e,{state:{commerce:t},dispatch:n}=E(),{update:{attractions:{setPassengers:r}}}=i(O),{trackClick:a}=y({clientContext:"setAttractionsPax"}),l=null==t||null==(e=t.attractionCommerce)?void 0:e.pax;return{pax:s(()=>{var e=new Map;return l&&l.filter(Boolean).forEach(t=>{e.set(t.ageBand,t.count)}),e},[l]),setPax:u(e=>{var t=[];e.forEach((e,n)=>t.push({ageBand:n,count:e})),a({clientParameter:JSON.stringify({pax:t})});var l=e.get("ADULT")||0,u=e.get("CHILD")||0;r(l,u),n({type:"setAttractionsPax",pax:t})},[n,a,r])}}function K(e){var t,n,r,{hotels:a,update:{hotels:{setStayDates:l}}}=i(O),{trackClick:s}=y(),o=u((e,t)=>{s({clientContext:"setHotelDates",clientParameter:JSON.stringify({checkIn:P(e),checkOut:P(t)})}),l(e,t)},[l,s]),c=u(()=>{s({clientContext:"resetHotelDates"});var e=new Date;e.setDate(e.getDate()+1),l(new Date,e)},[l,s]);return null===a||a.defaultDates?(t=z(null==e?void 0:e.checkIn,0),n=z(null==e?void 0:e.checkOut,1),r=(null==e?void 0:e.setByUser)||null):(t=a.checkInDate,n=a.checkOutDate,r=!a.defaultDates),{checkIn:t,checkOut:n,setByUser:r,setDates:o,resetDates:c}}function U(e){var t,{hotels:n,update:{hotels:{setGuestInfo:r,setTravelInfo:a}}}=i(O),{trackClick:l}=y(),{defaultRooms:o,defaultAdults:c,defaultChildrenAges:f,checkIn:d,checkOut:m}=s(()=>(e=>{if(null==(null==e?void 0:e.rooms))return w;var t=0,n=[],{rooms:r}=e;return r.filter(Boolean).forEach(e=>{t+=null==e.adults?0:e.adults,null!=e.childrenAges&&n.push(...e.childrenAges.filter(Boolean))}),{defaultRooms:r.length,defaultAdults:t,defaultChildrenAges:n,checkIn:e.checkIn,checkOut:e.checkOut}})(e),[e]),g=u(({rooms:e,adults:t,childrenAges:u})=>((e,t,n,r,a,l)=>(u,s,o)=>{l({clientContext:"setHotelGuests",clientParameter:JSON.stringify({rooms:u,adults:s,childrenAges:o})});var i=Array.from(Array(u),()=>[]);if(o.length>0)for(var c=[...o],f=Math.floor(c.length/u),d=c.length-f*u,m=0;m<i.length;m++){var g=f+(m<d?1:0);g>0&&(i[m]=c.slice(0,g),c=c.slice(g))}null!=n?e(s,u,i):t(r,a,s,u,i)})(r,a,n,d,m,l)(e,t,u),[r,a,n,d,m,l]);return[{rooms:(null==n?void 0:n.rooms)||o,adults:(null==n?void 0:n.adults)||c,childrenAges:(null==n||null==(t=n.childAgesPerRoom)?void 0:t.flat())||f},g]}var Y=e=>Array.from(e.values()).reduce((e,t)=>e+t,0);function J({passengerInfo:e,currentPax:t,setPax:n,showApplyButton:l}){var[i,c]=a(t),[f,d]=a(null),{localize:m}=b();o(()=>{c(t)},[t,c]),o(()=>{var r;if(e){var a=!1,l=new Map(t),u=null==(r=e.ageBands)?void 0:r.filter(Boolean);u&&u.length&&(u.forEach(e=>{var n=null!=e.minTravelersPerBooking?e.minTravelersPerBooking:0,r=null!=e.maxTravelersPerBooking?e.maxTravelersPerBooking:10,u=t.get(e.ageBand)||0;u<n?(l.set(e.ageBand,n),a=!0):u>r&&(l.set(e.ageBand,r),a=!0)}),t.forEach((e,t)=>{u.find(e=>e.ageBand===t)||(l.delete(t),a=!0)})),a&&n(l)}},[t,e,n]);var g=u((e,t)=>{d(null),c(n=>new Map([...n.entries(),[e,t]]))},[]),v=s(()=>Y(t),[t]),D=u(()=>{return t=null==e?void 0:e.requiresAdultForBooking,n=i,!1!==t&&0===n.get("ADULT")&&0===n.get("SENIOR")?(d(m.string("attractions.booking.errors.no_travelers")),!1):0===Y(i)?(d(m.string("attractions.booking.select_travelers_to_see_availability")),!1):!!(e=>{var t=!0;return e.forEach((e,n)=>{"INFANT"!==n&&e>0&&(t=!1)}),!t})(i)||(d(m.string("exp_booking_no_only_infants")),!1);var t,n},[i,m,e]),p=u(()=>D()?(function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,l;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(a of t.entries())if(!n.has(a[0]))return!1;for(a of t.entries())if(!e(a[1],n.get(a[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(a of t.entries())if(!n.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(t[a]!==n[a])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(l=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,l[a]))return!1;for(a=r;0!=a--;){var u=l[a];if(!e(t[u],n[u]))return!1}return!0}return t!=t&&n!=n}(i,t)||n(i),null):"pax",[i,n,D,t]);return s(()=>({name:"pax",showApplyButton:l,value:null,onApply:p,renderButton:function(e,t){return r.createElement(h,Object.assign({guests:v},t))},renderPicker:function(){return e?r.createElement(R,{passengerInfo:e,selections:i,onAgeBandChange:g,errorMessage:f}):null}}),[f,i,p,e,g,l,v])}return e({useAttractionDates:L,useAttractionPax:G,useDateRangePickers:V,useHotelDates:K,useHotelGuests:U,usePaxPicker:J,useSingleDatePicker:N}),[()=>{w={defaultRooms:1,defaultAdults:2,defaultChildrenAges:[],checkIn:new Date,checkOut:new Date},e("default",_),e({useAttractionDates:L,useAttractionPax:G,useDateRangePickers:V,useHotelDates:K,useHotelGuests:U,usePaxPicker:J,useSingleDatePicker:N})},[e=>(n=e,r=e.default,a=e.useState,l=e.useRef,u=e.useCallback,s=e.useMemo,o=e.useEffect,i=e.useContext),e=>(c=e.default,f=e.BorderlessButton),e=>d=e.default,e=>(m=e.InputField,g=e.DateRangeInputFieldItem,v=e.DateInputFieldItem,h=e.GuestsInputFieldItem),e=>D=e.SlideInModal,e=>p=e.default,e=>k=e.default,e=>(y=e.useTracking,E=e.useEntrypointContext,P=e.ISODateString),e=>(A=e.Device,O=e.TravelInfo),e=>B=e.default,e=>(S=e.default,b=e.useLocalize),e=>C=e.useKeyboardNavigationMode,e=>x=e.useKeyboardEvent,e=>I=e.default,e=>R=e.default]]},["cDcdfi","7yGKf-","jPSRY1","pyjSAG","E1X9WP","_cZwhS","Dg5_-9","PEYes_","2R4xv2","MHKLZN","0DsHEV","W3_c4H","8xs-IB","-ZZ9nz","6SswlX"]]);
