(this.$WP=this.$WP||[]).push(["_azji4",(e,a)=>{"use strict";var t,i,n,r,l,d,o,u,s,c,m,g,b,I,v,y,k,p,f,O,S,C=({businessContact:e,mobileOffer:a,desktopOffer:i,adSlot:n,albumId:r,categoryId:l,typeId:d,mediaId:o,referenceMediaId:u,locationId:s,locationName:c,secondaryTitleContent:m,actionHandler:g,enablePopupFooter:I,hideMASQuickAlbums:v,disableControls:p,getShareUrlForMedia:f,galleryRenderer:O,fullscreenRenderer:S,sort:C,customMobileButtonMenus:R,quickAlbumsConfiguration:A,queryClientOverride:N,heroDataStrategyOverride:h,pageDataStrategyOverride:E,trackingCallback:M})=>t.createElement(b,{mobileRenderer:()=>t.createElement(k,{businessContact:e,offer:a,actionHandler:g,categoryId:l,albumId:r,typeId:d,mediaId:o,referenceMediaId:u,locationId:s,locationName:c,getShareUrlForMedia:f,scrollHideCommerce:I,skipQuickAlbums:v,disableControls:p,customButtonMenus:R,galleryRendererOverride:O,fullscreenRendererOverride:S,sort:C,quickAlbumsConfiguration:A,queryClientOverride:N,heroDataStrategyOverride:h,pageDataStrategyOverride:E,trackingCallback:M}),desktopRenderer:()=>t.createElement(y,{businessContact:e,offer:i,adSlot:n,actionHandler:g,categoryId:l,albumId:r,typeId:d,mediaId:o,referenceMediaId:u,locationId:s,locationName:c,secondaryTitleContent:m,getShareUrlForMedia:f,skipQuickAlbums:v,disableControls:p,galleryRendererOverride:O,fullscreenRendererOverride:S,sort:C,quickAlbumsConfiguration:A,queryClientOverride:N,heroDataStrategyOverride:h,pageDataStrategyOverride:E,trackingCallback:M})}),R=e=>{var a=(null==e?void 0:e.albumId)||c;return o({albumId:a,mediaId:null==e?void 0:e.mediaId,categoryId:a})},A=!1,N=!1,h=e=>{var{locationId:a,initialSettings:i,hideHeaderControls:n,hideMASQuickAlbums:r,mobilePortraitFooterSlot:l,enablePopupAnimationMobilePortraitFooter:o,mobileLandscapeHeaderSlot:c,desktopHeaderRightSlot:b,businessContact:I,leftRailSlot:v,onClose:y,actionHandler:k,getShareUrlForMedia:S,galleryRenderer:C,fullscreenRenderer:h,customMobileButtonMenus:E,routeFragmentIdentifier:M,queryClientOverride:L,heroDataStrategyOverride:F,pageDataStrategyOverride:T,quickAlbumsConfiguration:D,trackingCallback:_}=e,[U,w]=t.useState({isOpen:!1,shouldToggle:!1}),H=t.useCallback((e,a)=>{try{k&&"INITIAL_ALBUM_UPDATE"!==a.type&&k(a)}catch(e){a.type}switch(a.type){case"ROUTE_NAVIGATE":return Object.assign({},a.newState,{sort:e.sort});case"ALBUM":return Object.assign({},e,{albumId:a.albumId,typeId:u(),categoryId:a.categoryId?a.categoryId:a.albumId,mediaId:null});case"FULLSCREEN_NAV":case"GALLERY_CLICK":return a.newMedia.media?Object.assign({},e,{mediaId:{id:a.newMedia.media.mediaId,type:a.newMedia.media.type}}):e;case"FULLSCREEN_CLOSE":return Object.assign({},e,{mediaId:null});case"CATEGORY_CHANGE":return Object.assign({},e,{categoryId:a.categoryId});case"SOURCE_CHANGE":return Object.assign({},e,{typeId:a.typeId});case"INVALIDATE_REFERENCE_MEDIA":return Object.assign({},e,{mediaId:null});case"SORT":return Object.assign({},e,{sort:a.sort});case"CLOSE":return w(e=>e.isOpen?{isOpen:!0,shouldToggle:!0}:e),e;case"ERROR":return O;default:return e}},[k]),[q,j]=t.useReducer(H,R(i)),P=null!=M,{clearFragment:B,initialRouteState:V}=m(a,P&&U.isOpen?q:null,M,j);t.useEffect(()=>{i&&!U.isOpen&&(j({type:s.routeNavigate,newState:R(i)}),w({isOpen:!1,shouldToggle:!0}))},[i,w,U]),t.useEffect(()=>{!P||!V||i||U.isOpen||N||A||(j({type:s.routeNavigate,newState:V}),w({isOpen:!1,shouldToggle:!0}))},[P,V,i,U,w]),t.useEffect(()=>{U.shouldToggle&&(U.isOpen&&A?(w({isOpen:!1,shouldToggle:!1}),A=!1):U.isOpen||A||(A=!0,N=!0,w({isOpen:!0,shouldToggle:!1})))},[U,w]),t.useEffect(()=>{U.isOpen&&U.shouldToggle&&(P&&B(),y&&y())},[U,y,P,B]);var Q=e=>e&&c?c():!e&&l?l():null;if(!U.isOpen)return null;var G=(null==i?void 0:i.albumId)||(null==V?void 0:V.albumId),W=(null==i?void 0:i.mediaId)||(null==V?void 0:V.mediaId);return t.createElement(d,{query:f,variables:{locationId:a}},({data:e})=>{var i,d,u,s,m=null==e||null==(i=e.locations)||null==(d=i[0])?void 0:d.name,y=null==e||null==(u=e.locations)||null==(s=u[0])?void 0:s.reviewSummary,k=(null==y?void 0:y.rating)&&(null==y?void 0:y.rating)>=0&&(null==y?void 0:y.count)&&(null==y?void 0:y.count)>0;return t.createElement(p,{enablePopupFooter:o,businessContact:I,mobileOffer:(c||l)&&Q,desktopOffer:b,adSlot:v,albumId:q.albumId,categoryId:q.categoryId,typeId:q.typeId,mediaId:q.mediaId,referenceMediaId:q.albumId===G?W:null,locationId:a,locationName:m,secondaryTitleContent:y&&k?t.createElement(g,{rating:y.rating||0,numReviews:y.count||0}):void 0,actionHandler:j,hideMASQuickAlbums:r,disableControls:n,getShareUrlForMedia:S,galleryRenderer:C,fullscreenRenderer:h,sort:q.sort,customMobileButtonMenus:E,quickAlbumsConfiguration:D,queryClientOverride:L,heroDataStrategyOverride:F,pageDataStrategyOverride:T,trackingCallback:_})})};function E(){var e=n(0),[a,t]=r(0),d=l(()=>{e.current=0,t(e=>e+1)},[]),o=l(a=>{switch(a.type){case s.albumSelect:case s.fullscreenClose:d();break;case s.galleryItemClicked:a.selectedIndex>=0&&d();break;case s.fullscreenNav:e.current++,5===e.current&&d()}},[d]),{id:u,ref:c}=v("300x250","LocationPhotoAlbum",a.toString());return{adRenderFunction:l(()=>i.createElement("div",{id:u,ref:c}),[u,c]),actionHandler:o}}return e("useLeftRailAd",E),[()=>{y=I.onUsage(()=>a("_azji4/35NN-R"),"default"),k=I.onUsage(()=>a("_azji4/Xncs_3"),"default"),p=t.memo(C),(f=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"MVLocationQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"reviewSummary"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"rating"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"count"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"mediaCount"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":174}}')).__key=0x70f72402d50c,f.loc.source={body:"70f72402d50c"},O=R(),S=t.memo(h),e("default",S),e("useLeftRailAd",E)},[e=>(t=e,i=e.default,n=e.useRef,r=e.useState,l=e.useCallback),e=>d=e.Query,e=>(o=e.buildDefaultState,u=e.getCurrentAllMediaGroupTypeId,s=e.actions,c=e.ALL_ALBUM),e=>m=e.useRouteHandler,e=>g=e.BubbleRatingWithReviewCount,e=>b=e.default,e=>I=e.component,e=>v=e.useAd]]},["cDcdfi","5X2em-","wc54S1","eh0n4_","MBK0so","RZRW7o","pLbCP4","tV1cF7"]]);
